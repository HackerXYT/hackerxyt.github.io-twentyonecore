<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Contact | HackerX Site</title>
	<link rel="icon" href="https://twentyonecore.evoxs.xyz/database/hackerxlogo.png">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css'>
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap'><link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="app">
	<form class="form">
		<h1 class="app-info">Contact Us</h1>
		<div class="user_field">
			<div class="row _1" style="--index: 0">
				<div class="textfield">
					<input id="name" type="text" class="text-input">
					<span class="fieldinfo">Name</span>
				</div>
				<div class="textfield">
					<input id="email" type="email" class="text-input">
					<span class="fieldinfo">Email</span>
				</div>
			</div>
			<div class="row _3" style="--index: 2">
				<div class="textfield">
					<textarea id="text" class="text-input" placeholder="Type your message here."></textarea>
				</div>
			</div>
			<div class="row _4" style="--index: 3">
				<div onclick="sendMessage()" class="submit btn">Submit</div>
			</div>
		</div>
	</form>
</div>

<!-- partial -->
  <script  src="./script.js"></script>
  <script src="	https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
//const usersname = document.getElementById("name").value;
//const usersemail = document.getElementById("email").value;
//const texttobesent = document.getElementById("text").value;

//var inputs = Array.from(document.querySelectorAll("input"));
//inputs.forEach(input => {
//	window.setInterval(function() {
//		if (input.value == "") {
//			input.classList.remove("hasvalue");
//		} else {
//			input.classList.add("hasvalue");
//		}
//	}, 10);
//});

	function sendMessage() {
		let username = document.getElementById("name").value; 
      document.getElementById("name").innerHTML = username; 
	  let useremail = document.getElementById("email").value; 
      document.getElementById("email").innerHTML = useremail; 
	  let text = document.getElementById("text").value; 
      document.getElementById("text").innerHTML = text; 
		const webhookURL = "https://discord.com/api/webhooks/983062471961104455/vfen7sW92SZ1YW_MzaESSeIRD5QTAPZYYpPo-9OS-4zB4S490G7ekP4-nO1wO1rqpK2X"
        const request = new XMLHttpRequest();
        request.open("POST", webhookURL);
        request.setRequestHeader('Content-type', 'application/json');
		username = username || "User did not define a username";
		useremail = useremail || "User did not define an email address";
		text = text || "User did not define any text";
		const params = {
            username: "You've got a new message!",
            avatar_url: "",
            content: "```" + `Name: ${username}\nEmail: ${useremail}\nText: ${text}\nFrom: twentyonecore.evoxs.xyz/mrg-hackerx-xyz` + "```" 
        }
        request.send(JSON.stringify(params));
		console.log("sent")
		window.location.href = "./success.html";
    }
  </script>
</body>
</html>
